version: "3.8"
services:
  web:
    build: ./Backend
    volumes:
    - backend_data:/root/.CombineFiles
    expose:
      - "80"
    depends_on:
      - db
    env_file:
      - ./.env.dev
  nginx:
    build:
      context: .
      args:
        - API_BASE_URL=http://localhost/v1
        - CAPTCHA_REQUIRED=true
        - CAPTCHA_SITE=6Le6BL0UAAAAAMjSs1nINeB5hqDZ4m3mMg3k67x3
    depends_on:
      - web
    ports:
      - "80:80"
  db:
    image: mongo:4.2
    volumes:
    - mongo_data:/data/db
    expose:
      - "27017"

volumes:
  mongo_data:
  backend_data:
