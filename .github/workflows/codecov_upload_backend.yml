name: codecov_upload_backend

on:
  workflow_run:
    workflows: [backend]
    types: [completed]

permissions:
  contents: read

jobs:
  upload_coverage:
    runs-on: ubuntu-latest
    steps:
      - name: Download coverage artifact
        uses: actions/download-artifact@v3
        with:
          name: coverage-backend
          path: coverage.cobertura.xml
      - name: Upload coverage report
        uses: codecov/codecov-action@eaaf4bedf32dbdc6b720b63067d99c4d77d6047d # v3.1.4
        with:
          files: coverage.cobertura.xml
          flags: backend
          name: Backend
