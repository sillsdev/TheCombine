# Define the charts that need to be installed for each cluster type
clusters:
  docker-desktop:
    - cert-manager
    - nginx-ingress-controller
  rancher-desktop:
    - cert-manager
    - rancher-ui
  nuc:
    - cert-manager
    - nginx-ingress-controller

# Specify how each chart is to be installed.  The "repo" key specified which
# helm repository needs to be added and the "chart" key specifies how to
# install/update the chart.
cert-manager:
  repo:
    name: jetstack
    url: https://charts.jetstack.io
  chart:
    name: cert-manager
    reference: jetstack/cert-manager
    namespace: cert-manager
    options:
      - --version
      - v1.7.1
      - --set
      - installCRDs=true
      - --wait
      - --debug

nginx-ingress-controller:
  repo:
    name: ingress-nginx
    url: https://kubernetes.github.io/ingress-nginx
  chart:
    name: ingress-controller
    reference: ingress-nginx/ingress-nginx
    namespace: ingress-nginx

rancher-ui:
  repo:
    name: rancher-latest
    url: https://releases.rancher.com/server-charts/latest
  chart:
    name: rancher
    reference: rancher-latest/rancher
    namespace: cattle-system
    options:
      - --version=2.6.3
      - --set
      - hostname=rancher.local
      - --set
      - bootstrapPassword=IShouldHaveChangedThePassword
      - --wait
      - --debug
    post_install:
      - cmd:
          - kubectl
          - -n
          - cattle-system
          - rollout
          - status
          - deploy/rancher
      - cmd:
          - kubectl
          - -n
          - cattle-system
          - get
          - all,ing
