apiVersion: v1
kind: ConfigMap
metadata: 
  name: configmap-otel
  namespace: {{ .Release.Namespace }}
data:
  COLLECTOR_CONFIG_OVERRIDE: |
    receivers:
      otlp:
        protocols:
          grpc:
            endpoint: 0.0.0.0:4317
          http:
            endpoint: 0.0.0.0:4318

    processors:
      batch:

    exporters:
      otlp:
        endpoint: "https://api.honeycomb.io"
        headers:
          "x-honeycomb-team": {{ .Values.global.honeycombSecretKey | quote }}

    service:
      pipelines:
        traces:
          receivers: [otlp]
          processors: [batch]
          exporters: [otlp]
  OTEL_SERVICE_NAME: my-service-name
  OTEL_EXPORTER_OTLP_PROTOCOL: http/protobuf
  OTEL_EXPORTER_OTLP_ENDPOINT: "https://api.honeycomb.io"

