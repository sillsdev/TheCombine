apiVersion: v1
data:
{% if cert_mode == "cert-server" %}
  AWS_ACCESS_KEY_ID: {{ aws_access_profiles.s3_read_write.key_id | b64encode }}
  AWS_DEFAULT_REGION: {{ aws_access_profiles.s3_read_write.region | b64encode }}
  AWS_S3_CERT_LOC: {{ aws_s3_cert_loc | b64encode }}
  AWS_SECRET_ACCESS_KEY: {{ aws_access_profiles.s3_read_write.secret | b64encode }}
{% elif cert_mode == "cert-client" %}
  AWS_ACCESS_KEY_ID: {{ aws_access_profiles.s3_read_only.key_id | b64encode }}
  AWS_DEFAULT_REGION: {{ aws_access_profiles.s3_read_only.region | b64encode }}
  AWS_S3_CERT_LOC: {{ aws_s3_cert_loc | b64encode }}
  AWS_SECRET_ACCESS_KEY: {{ aws_access_profiles.s3_read_only.secret | b64encode }}
{% endif %}
kind: Secret
metadata:
  creationTimestamp: null
  labels:
    io.kompose.service: certmgr-env-certmgr
  name: env-certmgr-secrets
type: Opaque
